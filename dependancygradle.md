/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
buildscript {
    repositories {
        maven {
            url 'https://repo1.uhc.com/artifactory/repoauth'
            credentials {
                username = "runx_ohhlload"
                password = "ohLOA35U"
            }
        }
    }
    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:2.7.20.optum-2")
        classpath("io.spring.gradle:dependency-management-plugin:1.0.15.RELEASE")
    }
}

plugins {
    id 'java'
    id 'eclipse'
    id 'idea'
    id 'org.springframework.boot' version '3.5.0'
    id 'io.spring.dependency-management' version '1.1.7'
}
java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(21)
    }
}
    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:2.7.20.optum-2")
        classpath("io.spring.gradle:dependency-management-plugin:1.0.15.RELEASE")
    }

/// Method to get the current git branch
def gitBranch() {
    def branch = ""
    def proc = "git describe --all".execute()
    proc.in.eachLine { line -> branch = line }
    proc.err.eachLine { line -> println line }
    proc.waitFor()
    branch
}

print gitBranch()

if (gitBranch().equals("heads/master") || gitBranch().equals("remotes/origin/master")) {
    project.version = '2.0-SNAPSHOT'
} else {
    project.version = '1.0-SNAPSHOT'

    repositories {
        maven {
            url 'https://repo1.uhc.com/artifactory/repoauth'
            credentials {
                username = "runx_ohhlload"
                password = "ohLOA35U"
            }
        }
        maven {
            url 'https://repo1.uhc.com/artifactory/libs-releases/'
        }
    }


    sourceCompatibility = 1.8
    targetCompatibility = 1.8

    dependencyManagement {
        imports {
            mavenBom 'com.amazonaws:aws-java-sdk-bom:1.12.734'
            mavenBom "org.springframework.boot:spring-boot-dependencies:3.5.0" //TODO Spring Boot Version
        }
    }

    dependencies {
        annotationProcessor "org.projectlombok:lombok:1.18.22"
//        implementation 'com.amazonaws:aws-java-sdk-s3:1.12.734'
//        implementation 'org.apache.logging.log4j:log4j-api:2.17.1'
//        implementation 'org.apache.logging.log4j:log4j-core:2.17.1'
        implementation 'com.amazonaws:aws-java-sdk-s3:1.12.734'
        implementation 'org.apache.logging.log4j:log4j-api:2.22.0'
        implementation 'org.apache.logging.log4j:log4j-core:2.22.0'

        implementation 'org.springframework.kafka:spring-kafka' //TODO Spring Kafka
        implementation 'org.springframework.boot:spring-boot-starter-web' //TODO Spring Boot

        // https://mvnrepository.com/artifact/javax.json/javax.json-api
        implementation group: 'javax.json', name: 'javax.json-api', version: '1.0-b01'

        implementation 'javax.json:javax.json-api:1.0-b01'
        implementation 'org.glassfish:javax.json:1.1'

        // https://mvnrepository.com/artifact/com.google.code.gson/gson
        implementation group: 'com.google.code.gson', name: 'gson', version: '2.9.1'
        implementation group: 'org.glassfish', name: 'javax.json', version: '1.1'
        // https://mvnrepository.com/artifact/org.elasticsearch.client/elasticsearch-rest-high-level-client
        implementation 'org.elasticsearch.client:elasticsearch-rest-high-level-client:7.17.15'

        //JMockit dependencies
        testImplementation group: 'org.jmockit', name: 'jmockit', version: '1.19'
        //JUnit dependencies
        testImplementation 'junit:junit:4.13.2'
        // https://mvnrepository.com/artifact/org.json/json
        implementation group: 'org.json', name: 'json', version: '20231013'
        // https://mvnrepository.com/artifact/org.projectlombok/lombok
        implementation group: 'org.projectlombok', name: 'lombok', version: '1.18.22'
        // https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations
//        implementation group: 'com.fasterxml.jackson.core', name: 'jackson-annotations', version: '2.16.2'
//        implementation group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.16.2'
//        implementation group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.16.2'
        implementation 'com.fasterxml.jackson.core:jackson-annotations:2.16.2'
        implementation 'com.fasterxml.jackson.core:jackson-core:2.16.2'
        implementation 'com.fasterxml.jackson.core:jackson-databind:2.16.2'
        implementation 'org.json:json:20231013'
        implementation 'com.google.code.gson:gson:2.9.1'

        // https://mvnrepository.com/artifact/org.powermock/powermock-api-mockito
        testImplementation group: 'org.powermock', name: 'powermock-api-mockito', version: '1.6.5'
        // https://mvnrepository.com/artifact/org.powermock/powermock-module-junit4
        testImplementation group: 'org.powermock', name: 'powermock-module-junit4', version: '1.6.5'
        // https://mvnrepository.com/artifact/org.mockito/mockito-core
        testImplementation group: 'org.mockito', name: 'mockito-core', version: '1.10.19'
        // https://mvnrepository.com/artifact/commons-io/commons-io
        implementation group: 'commons-io', name: 'commons-io', version: '2.8'
        implementation group: 'org.yaml', name: 'snakeyaml', version: '2.0'
        // https://mvnrepository.com/artifact/javax.ws.rs/javax.ws.rs-api
        implementation group: 'javax.ws.rs', name: 'javax.ws.rs-api', version: '2.1'

// Unit Testing
        testImplementation 'junit:junit:4.13.2'
        testImplementation 'org.jmockit:jmockit:1.19'
        testImplementation 'org.springframework.boot:spring-boot-starter-test' //TODO Spring Boot Starter Test
        testImplementation 'org.mockito:mockito-core:5.12.0'
        testImplementation 'org.junit.jupiter:junit-jupiter-api:5.10.2'
        testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.10.2'
        testImplementation 'org.powermock:powermock-api-mockito:1.6.5'
        testImplementation 'org.powermock:powermock-module-junit4:1.6.5'
        testImplementation 'org.mockito:mockito-core:1.10.19'
    }

    test {
        useJUnitPlatform()
    }
}

and i got this error

Build file 'C:\Users\ahaldar1\pure-shared-lib\orx-ls-ohhl-pure-shared-lib\build.gradle' line: 27

Plugin [id: 'org.springframework.boot', version: '3.5.0'] was not found in any of the following sources:

* Try:
> Run with --stacktrace option to get the stack trace.
> Run with --info or --debug option to get more log output.
> Run with --scan to get full insights.
> Get more help at https://help.gradle.org.
BUILD FAILED in 430ms
